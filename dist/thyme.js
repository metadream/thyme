(()=>{"use strict";var n={567:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,"button,a.button {display:inline-flex;position:relative;justify-content:center;align-items:center;-webkit-user-drag:none;-webkit-touch-callout:none;user-select:none;text-decoration:none;vertical-align:middle;font:inherit;white-space:nowrap;cursor:pointer;color:#fff;border:0;outline:0;padding:0 30px;width:100%;height:40px;font-weight:700;font-size:var(--font-size,var(--fs));background-color:var(--primary-color,var(--pc));border-radius:var(--border-radius,var(--br));transition:opacity .3s;overflow:hidden;}button:disabled,a.button:disabled {opacity:.5;cursor:default;}button.outlined,a.button.outlined {padding:0 28.5px;color:var(--primary-color,var(--pc));border:1.5px solid currentColor;background-color:#fff;}button.tonal,a.button.tonal {color:var(--primary-color,var(--pc));background-color:color-mix(in srgb,currentColor 20%,#fff);}button.minor,a.button.minor {--primary-color:var(--grayColor);}button.warning,a.button.warning {--primary-color:var(--wc);}button.danger,a.button.danger {--primary-color:var(--ec);}button.success,a.button.success {--primary-color:var(--sc);}.ripple {position:absolute;border-radius:50%;background-color:currentColor;transform:scale(0);opacity:0;width:0;height:0;}.ripple.spread {animation:spread .3s ease-out forwards;}.ripple.fade-out {animation:fadeOut .3s linear forwards;}.loading {position:absolute;width:100%;height:100%;}.loading:before {--circleColor:color-mix(in srgb,currentColor 20%,transparent);}@keyframes spread {from {transform:scale(0);opacity:0.6;}to {transform:scale(1);opacity:0.3;}}@keyframes fadeOut {from {transform:scale(1);opacity:0.3;}to {transform:scale(1);opacity:0;}}",""]),a.locals={};const s=a},545:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,".overlay {background:none;}.calendar {position:absolute;z-index:1000001;font-size:13px;color:var(--carbonColor);background-color:#fff;box-shadow:0 0 16px rgb(0 0 0 / 8%);user-select:none;}.calendar-header {display:flex;align-items:center;height:40px;padding:7px;border-bottom:1px solid var(--platColor);}.calendar-title {flex:1;text-align:center;color:var(--primary-color,var(--pc));font-size:15px;cursor:pointer;}.calendar-body {padding:10px;}table {width:100%;border-collapse:collapse;}tr {border:0;height:auto;}th,td {width:32px;height:32px;text-align:center;}td {padding:3px;}td>div {display:flex;justify-content:center;align-items:center;height:100%;border-radius:3px;cursor:pointer;transition:.3s all;}td>div:hover {background-color:var(--platColor);}td>div.today {color:#fff;background-color:var(--primary-color,var(--pc));}td>div.curr {color:#fff;background-color:var(--grayColor);}td>div.minor {color:var(--silverColor);}.calendar svg.icon {width:auto;height:100%;padding:6px;cursor:pointer;border-radius:3px;transition:.3s all;}.calendar svg.icon:hover {background-color:var(--platColor);}",""]),a.locals={};const s=a},399:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,'label {display:inline-flex;align-items:center;cursor:pointer;user-select:none;}label.disabled {color:var(--grayColor);cursor:default;}label.disabled input {background-color:var(--silverColor);}label input {display:grid;place-content:center;-webkit-appearance:none;appearance:none;outline:0;margin:0;width:16px;height:16px;color:#fff;background-color:#fff;border:1.5px solid var(--primary-color,var(--pc));border-radius:var(--border-radius,var(--br));}label input[type="radio"] {border-radius:50%;}label input::before {content:"";width:10px;height:10px;background-color:#fff;clip-path:polygon(10% 46%,0% 59%,45% 95%,100% 16%,86% 7%,43% 68%);transform:scale(0);transition:.2s transform;}label input:checked {background-color:var(--primary-color,var(--pc));}label input:checked::before {transform:scale(1);}label input + * {margin-left:5px;}',""]),a.locals={};const s=a},815:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,".dialog {display:none;justify-content:center;align-items:center;-webkit-touch-callout:none;user-select:none;}.dialog-panel {display:flex;flex-direction:column;background-color:#fff;max-width:80%;max-height:80%;min-width:300px;border-radius:var(--border-radius,var(--br));overflow:hidden;}.dialog-header {display:flex;justify-content:center;align-items:center;height:45px;font-weight:700;background-color:var(--platColor);}.dialog-body {flex:1;overflow-x:hidden;overflow-y:auto;padding:25px;}.dialog-footer {display:flex;}.dialog-body::-webkit-scrollbar {width:10px;}.dialog-body::-webkit-scrollbar-thumb {background:var(--line-color);border-radius:var(--border-radius);}.dialog-body::-webkit-scrollbar-track {background:transparent;}button {position:relative;font:inherit;font-weight:700;outline:0;height:45px;cursor:pointer;background-color:#fff;color:var(--grayColor);border:1px solid transparent;border-top-color:var(--platColor);-webkit-tap-highlight-color:rgba(0,0,0,0);flex:1;}button:not(:first-child) {border-left-color:var(--platColor);}button.primary {color:var(--font-color,var(--fc));}button:active {background-color:var(--platColor);}button:disabled {cursor:default;background-color:#fff;}.loading {position:absolute;left:0;right:0;top:0;bottom:0;}.fade-in {animation:fadeIn ease .3s forwards;}.fade-out {animation:fadeOut ease .3s forwards;}.scale-in {animation:scaleIn ease .3s forwards;}.scale-out {animation:scaleOut ease .3s forwards;}@keyframes fadeIn {from {opacity:0;}to {opacity:1;}}@keyframes fadeOut {from {opacity:1;}to {opacity:0;}}@keyframes scaleIn {from {transform:scale(0.8);}to {transform:scale(1);}}@keyframes scaleOut {from {transform:scale(1);}to {transform:scale(0.8);}}",""]),a.locals={};const s=a},205:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,".field {display:flex;position:relative;border-radius:var(--border-radius,var(--br));border:1px solid var(--silverColor);background-color:#fff;min-height:40px;min-width:150px;transition:.3s;}.field:focus-within {border-color:var(--primary-color,var(--pc));box-shadow:0 0 5px 0 rgb(0 0 0 / 15%);}.field:focus-within>label:after {background-color:var(--primary-color,var(--pc));}.field:focus-within:has(:invalid) {border-color:var(--warningColor,var(--wc));}.field:has(:required)>label:after {background-color:var(--warningColor,var(--wc));}.field.plain {border-color:transparent;}.field.tonal>label {border-top-left-radius:var(--border-radius,var(--br));border-bottom-left-radius:var(--border-radius,var(--br));background-color:var(--platColor);}.field>label {position:relative;display:flex;align-items:baseline;cursor:default;min-width:120px;padding:7px 20px;white-space:nowrap;}.field>label:after {content:'';position:absolute;top:9px;bottom:9px;right:0;width:1px;background-color:var(--silverColor);transition:.3s;}.field-body {display:flex;align-items:center;flex-wrap:wrap;position:relative;overflow:hidden;flex:1;margin:0 10px;}.field-body input {font:inherit;outline:0;border:0;margin:0;padding:0;width:100%;height:100%;}.field-body input.readonly {pointer-events:none;caret-color:transparent;}.field-body input.hidden {position:absolute;opacity:0;width:100%;height:100%;}.field-body input[disabled] {color:var(--grayColor);pointer-events:none;background:transparent;}.field-icon {display:flex;justify-content:center;align-items:baseline;cursor:pointer;outline:0;width:40px;padding:11px;border-top-right-radius:var(--border-radius,var(--br));border-bottom-right-radius:var(--border-radius,var(--br));transition:.2s;}.field-icon>*,.loading:before {display:block;width:16px;height:16px;}.tooltip,.tooltip::before {z-index:99999;background:#fef6d5;border:1px solid #666;}.tooltip {position:fixed;padding:5px 10px;margin-top:10px;font-size:14px;border-radius:5px;box-shadow:3px 3px 3px rgb(0 0 0 / 16%);}.tooltip:before {position:absolute;content:'';bottom:100%;left:15%;padding:5px;margin-bottom:-5px;border-width:0 1px 1px 0;transform:rotate(-135deg);}",""]),a.locals={};const s=a},234:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,'*,*:before,*:after {box-sizing:border-box;}:root {--primary-color:#18c;--minor-color:#999;--line-color:#ccc;--heading-color:#333;--font-color:#333;--font-family:system-ui,-apple-system,BlinkMacSystemFont,"Helvetica Neue",Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Heiti SC","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;--font-size:15px;--spacing:15px;--border-radius:5px;}::placeholder {color:var(--minor-color);}html {font-size:var(--font-size);}html.scroll-blocked {position:fixed;overflow-y:scroll;left:var(--th-scroll-x);top:var(--th-scroll-y);width:100%;height:100%;}body {margin:0;line-height:1.6;font-family:var(--font-family);color:var(--font-color);}img {max-width:100%;}iframe {display:block;}h1,h2,h3,h4,h5 {font-weight:400;margin:0 0 var(--spacing) 0;}h1,h2,h3 {color:var(--heading-color);}h1 {font-size:3rem;line-height:3.8rem;}h2 {font-size:2.2rem;}h3 {font-size:1.6rem;}h4 {font-size:1.2rem;}h5 {font-size:0.9rem;font-weight:700;color:inherit;}table.thyme {--headBgColor:#ddd;}table.thyme.list {table-layout:fixed;border-collapse:collapse;border-style:hidden;border-radius:var(--border-radius);box-shadow:0 0 0 1px var(--line-color);width:100%;}table.thyme.list th,table.thyme.list td {height:40px;padding:5px 10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}table.thyme.list th {background-color:var(--headBgColor);}table.thyme.list td {border-left:1px solid #f3f3f3;border-top:1px solid var(--line-color);}table.thyme.list th:first-child {border-top-left-radius:var(--border-radius);}table.thyme.list th:last-child {border-top-right-radius:var(--border-radius);}table.thyme.list tr:last-child td:first-child {border-bottom-left-radius:var(--border-radius);}table.thyme.list tr:last-child td:last-child {border-bottom-right-radius:var(--border-radius);}[tooltip] {position:relative;}[tooltip]:before,[tooltip]:after {position:absolute;visibility:hidden;pointer-events:none;opacity:0;bottom:100%;left:50%;transform:translate3d(-50%,-10px,0);transition:opacity .5s;}[tooltip]:hover:before,[tooltip]:hover:after {visibility:visible;opacity:1;}[tooltip]:before {content:\'\';z-index:1000011;background-color:transparent;border:6px solid transparent;border-top-color:rgba(0,0,0,0.7);margin-bottom:-12px;}[tooltip]:after {content:attr(tooltip);z-index:1000010;margin-right:-300px;padding:6px 10px;font-size:14px;line-height:1.6;border-radius:var(--border-radius);background-color:rgba(0,0,0,0.7);color:#fff;}th-button {display:inline-block;}',""]),a.locals={};const s=a},336:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,'.select {display:flex;flex-direction:column;position:absolute;user-select:none;z-index:1000001;max-height:300px;padding:10px 0;overflow-x:hidden;overflow-y:auto;background-color:#fff;box-shadow:0 0 16px rgb(0 0 0 / 8%);}.select::-webkit-scrollbar {width:6px;}.select::-webkit-scrollbar-thumb {background-color:var(--platColor);}.select::-webkit-scrollbar-thumb:hover {background-color:var(--silverColor);}.option {display:flex;align-items:center;cursor:pointer;padding:5px 20px;transition:.3s;}.option.disabled {color:var(--grayColor);cursor:default;}.option.selected {background-color:var(--primary-color,var(--pc));}.option:not(.disabled):not(.selected):hover {background-color:var(--platColor);}/* 纯CSS实现打勾图标 *//* .option.selected::before {content:"";position:absolute;width:14px;height:14px;left:18px;clip-path:polygon(7% 47%,0% 57%,45% 93%,100% 13%,90% 7%,44% 73%);background-color:var(--primary-color,var(--pc));} */.overlay {background:none;}slot {display:none;}',""]),a.locals={};const s=a},738:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,"*,*:before,*:after {box-sizing:border-box;}:host {--pc:#19c;--ec:#e58;--wc:#f80;--sc:#3b6;--fc:#333;--carbonColor:#666;--grayColor:#999;--silverColor:#ccc;--platColor:#eee;--fs:15px;--br:5px;font:inherit;font-size:var(--font-size,var(--fs));color:var(--font-color,var(--fc));line-height:1.6;}::placeholder {color:var(--grayColor);}svg.icon {width:16px;height:16px;fill:var(--grayColor);}.overlay {position:fixed;z-index:1000000;background-color:rgba(0,0,0,0.5);left:0;right:0;top:0;bottom:0;}.loading {display:flex;justify-content:center;align-items:center;background-color:inherit;border-radius:inherit;pointer-events:none;}.loading:before {content:'';position:absolute;width:18px;height:18px;border-radius:50%;border-left:2px solid currentColor;border-right:2px solid var(--circleColor,var(--silverColor));border-top:2px solid var(--circleColor,var(--silverColor));border-bottom:2px solid var(--circleColor,var(--silverColor));animation:spin .6s linear infinite;}@keyframes spin {from {transform:rotate(0);}to {transform:rotate(360deg);}}",""]),a.locals={};const s=a},377:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,'.switch {position:relative;display:inline-block;width:37px;height:24px;}.switch input {opacity:0;width:0;height:0;}.switch i {position:absolute;cursor:pointer;top:0;bottom:0;left:0;right:0;background-color:var(--silverColor);border-radius:26px;transition:.3s;}.switch i:before {position:absolute;content:"";height:14px;width:14px;left:6px;bottom:5px;background-color:#fff;border-radius:50%;transition:.3s;}input:checked+i {background-color:var(--primary-color,var(--pc));}input:checked+i:before {transform:translateX(12px);height:16px;width:16px;left:4px;bottom:4px;}',""]),a.locals={};const s=a},739:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,"div[contenteditable] {outline:0;padding:5px 0;width:100%;min-height:80px;}slot {display:none;}",""]),a.locals={};const s=a},613:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,".toast {display:flex;justify-content:center;background-color:transparent;height:0;opacity:0;}.toast>div {position:absolute;bottom:0;max-width:80%;padding:6px 15px;border-radius:3px;font-weight:700;color:#fff;background-color:color-mix(in srgb,var(--font-color) 80%,transparent);}.toast>div.warning {--font-color:var(--wc);}.toast>div.error {--font-color:var(--ec);}.toast>div.success {--font-color:var(--sc);}.bounce-in {animation:bounceIn cubic-bezier(.17,.88,.48,1.5) .3s forwards;}.bounce-out {animation:bounceOut ease-out .3s;}@keyframes bounceIn {from {opacity:0;transform:translateY(0);}to {opacity:1;transform:translateY(120px);}}@keyframes bounceOut {from {opacity:1;transform:translateY(120px);}to {opacity:0;transform:translateY(0);}}",""]),a.locals={};const s=a},383:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,".toptray {display:none;position:fixed;right:30px;bottom:30px;width:40px;height:40px;padding:10px;background-color:#fff;cursor:pointer;color:var(--grayColor);border-radius:var(--border-radius,var(--br));box-shadow:0 1px 10px 0 rgb(0 0 0 / 20%);}svg.icon {width:auto;height:auto;}",""]),a.locals={};const s=a},862:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,'.upload-list {display:flex;flex-wrap:wrap;flex:1;margin-top:5px;}.upload-entry {display:flex;margin:0 5px 5px 0;padding:6px 8px;line-height:16px;font-size:14px;border-radius:var(--border-radius,var(--br));background-color:var(--platColor);}.upload-entry>a {display:flex;align-items:center;text-decoration:none;cursor:pointer;color:var(--carbonColor);}a.download-icon svg.icon {fill:var(--primary-color,var(--pc));}a.remove-icon svg.icon {fill:var(--errorColor,var(--ec));}a[class$="-icon"] {margin-left:5px;}a:hover {text-decoration:underline;}input[type="file"] {display:none;}',""]),a.locals={};const s=a},49:(n,t,e)=>{e.d(t,{Z:()=>s});var o=e(81),i=e.n(o),r=e(645),a=e.n(r)()(i());a.push([n.id,"div {position:relative;}::slotted(*) {position:absolute;}",""]),a.locals={};const s=a},645:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e="",o=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),o&&(e+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),e+=n(t),o&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e})).join("")},t.i=function(n,e,o,i,r){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var d=0;d<n.length;d++){var c=[].concat(n[d]);o&&a[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),e&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=e):c[2]=e),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),t.push(c))}},t}},81:n=>{n.exports=function(n){return n[1]}}},t={};function e(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={id:o,exports:{}};return n[o](r,r.exports,e),r.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var o={};(()=>{e.d(o,{Z:()=>an});var n={};e.r(n),e.d(n,{base64Encode:()=>C,createElement:()=>l,createStyle:()=>d,delay:()=>r,enhanceElements:()=>h,formatBytes:()=>b,formatDate:()=>v,formatDecimal:()=>m,formatSeconds:()=>x,importScripts:()=>c,isBooleanAttribute:()=>p,nanoId:()=>a,parseBoolean:()=>u,parseDuration:()=>y,parseInteger:()=>g,registerComponent:()=>s,stringify:()=>w,svg2png:()=>k,toDataURI:()=>f});var t=e(234);class i{static get left(){return document.body.scrollLeft||document.documentElement.scrollLeft}static get top(){return document.body.scrollTop||document.documentElement.scrollTop}static set left(n){document.body.scrollLeft=document.documentElement.scrollLeft=n}static set top(n){document.body.scrollTop=document.documentElement.scrollTop=n}static exists(){return document.body.scrollWidth>(window.innerWidth||document.documentElement.clientWidth)||document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)}static block(){if(!this.exists())return;const n=document.querySelector("html");n.style.setProperty("--th-scroll-x",0-this.left+"px"),n.style.setProperty("--th-scroll-y",0-this.top+"px"),n.addClass("scroll-blocked")}static unblock(){const n=document.querySelector("html");n.removeClass("scroll-blocked"),this.left=0-parseInt(n.style.getPropertyValue("--th-scroll-x")),this.top=0-parseInt(n.style.getPropertyValue("--th-scroll-y")),n.style.removeProperty("--th-scroll-x"),n.style.removeProperty("--th-scroll-y")}}function r(n){return new Promise((t=>setTimeout(t,n)))}function a(n=24){return crypto.getRandomValues(new Uint8Array(n)).reduce(((n,t)=>n+((t&=61)<36?t.toString(36):(t-26).toString(36).toUpperCase())),"")}function s(n,t){customElements.define(n,t)}function l(n){if(n){if(0===(n=n.replace(/[\t\r]/gm,"").trim()).indexOf("<")){const t=document.createElement("template");return t.innerHTML=n,t.content.firstElementChild.cloneNode(!0)}return document.createElement(n)}}function d(n){const t=l("style");return t.textContent=n||"",t}function c(...n){return new Promise(((t,e)=>{const o=document.getElementsByTagName("head")[0],i=o.querySelector("script"),r=e=>{const a=document.createElement("script");a.setAttribute("src",n[e]),a.onload=a.onerror=()=>{++e===n.length?t():r(e)},o.insertBefore(a,i)};r(0)}))}function h(){Object.assign(Element.prototype,{query(n){return this.querySelector(n)},queryAll(n){return this.querySelectorAll(n)},on(n,t){"string"==typeof n&&(n=[n]);for(const e of n)this.addEventListener(e,t);return this},off(n,t){"string"==typeof n&&(n=[n]);for(const e of n)this.removeEventListener(e,t);return this},addClass(...n){return this.classList.add(...n),this},removeClass(...n){return this.classList.remove(...n),this},attr(n,t){return null===t?(this.removeAttribute(n),this):void 0===t?(t=this.getAttribute(n),p(n)?u(t):t):p(n)&&!u(t)?this.attr(n,null):(this.setAttribute(n,t),this)},attachTo(n){const t=n.getBoundingClientRect();return this.style.left=t.x+i.left+"px",this.style.top=t.y+t.height+i.top+1+"px",this},swap(n){return n&&n.insertAdjacentElement("beforeBegin",this),this},remove(){return this.parentNode&&this.parentNode.removeChild(this)}})}function p(n){return["required","editable","readonly","checked","disabled","autofocus"].includes(n)}function u(n){return null!==n&&!1!==n&&"null"!==n&&"undefined"!==n&&"false"!==n&&"0"!==n}function g(n){return/^\d+$/.test(n)?parseInt(n):0}function f(n){return"data:image/svg+xml;base64,"+btoa(n)}function v(n,t,e){const o=e?"getUTC":"get";return t.replace(/yyyy/g,n[o+"FullYear"]()).replace(/yy/g,(""+n[o+"FullYear"]()).slice(-2)).replace(/MM/g,("0"+(n[o+"Month"]()+1)).slice(-2)).replace(/M/g,n[o+"Month"]()+1).replace(/dd/g,("0"+n[o+"Date"]()).slice(-2)).replace(/d/g,n[o+"Date"]()).replace(/hh/g,("0"+n[o+"Hours"]()).slice(-2)).replace(/h/g,n[o+"Hours"]()).replace(/mm/g,("0"+n[o+"Minutes"]()).slice(-2)).replace(/m/g,n[o+"Minutes"]()).replace(/ss/g,("0"+n[o+"Seconds"]()).slice(-2)).replace(/s/g,n[o+"Seconds"]()).replace(/SSS/g,("00"+n[o+"Milliseconds"]()).slice(-3)).replace(/S/g,n[o+"Milliseconds"]())}function m(n,t){return parseFloat(n.toFixed(t))}function b(n){if(!n||n<1)return"0";const t=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB"],e=Math.min(t.length-1,Math.floor(Math.log(n)/Math.log(1024))),o=Math.max(0,e-2);return parseFloat((n/Math.pow(1024,e)).toFixed(o))+" "+t[e]}function y(n){if(!n)return 0;const t=n.trim().match(/^(\d{2}):(\d{2}):(\d{2})(\.\d{1,3})?$/);if(!t)return 0;const e=parseInt(t[1],10),o=parseInt(t[2],10),i=parseInt(t[3],10),r=parseFloat(t[4])||0;return e>59||o>59||i>59?0:60*(60*e+o)+i+r}function x(n){const t=Math.floor(n/86400),e=Math.floor(n%86400/3600),o=Math.floor(n%3600/60),i=Math.round(n%60);return((t>0?t+"d ":"")+(e>0?e+"h ":"")+(o>0?o+"m ":"")+(i>0?i+"s":"")).trim()}function w(n){return Object.keys(n).map((t=>t+"="+encodeURI(n[t]))).join("&")}function k(n,t,e){void 0===e&&(e=t,t=1);const o=n.getBBox(),i=n.cloneNode(!0);i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("width",o.width*t),i.setAttribute("height",o.height*t);const r="data:image/svg+xml;base64,"+C((new XMLSerializer).serializeToString(i)),a=new Image;a.src=r,a.crossOrigin="anonymous",a.onload=()=>{const n=document.createElement("canvas");n.width=a.width,n.height=a.height,n.getContext("2d").drawImage(a,0,0),e(n.toDataURL("image/png"))}}function C(n){return btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,((n,t)=>String.fromCharCode("0x"+t))))}const E={"zh-CN":{OK:"确定",YES:"确定",NO:"取消",MON:"一",TUE:"二",WED:"三",THU:"四",FRI:"五",SAT:"六",SUN:"日",UPLOAD:"上传附件",MAX_ALLOWED_FILES:"最多允许上传 {{maxFiles}} 个文件",MAX_ALLOWED_SIZE:"单文件大小不允许超过 {{maxSize}}",DELETE_PROMPT:"确定删除吗？",DELETE_SUCCESS:"删除成功",UNSUPPORTED_RESPONSE:"不支持的响应类型",NETWORK_ERROR:"网络连接异常"},en:{OK:"OK",YES:"YES",NO:"NO",MON:"MON",TUE:"TUE",WED:"WED",THU:"THU",FRI:"FRI",SAT:"SAT",SUN:"SUN",UPLOAD:"UPLOAD",MAX_ALLOWED_FILES:"Uploaded files is not allowed to exceed {{maxFiles}}",MAX_ALLOWED_SIZE:"Single file size is not allowed to exceed {{maxSize}}",DELETE_PROMPT:"Sure you want to delete?",DELETE_SUCCESS:"Delete succeeded",UNSUPPORTED_RESPONSE:"Unsupported response type",NETWORK_ERROR:"Network connection error"},get(n,t){let e=globalThis.Thyme?.locale||navigator.language;e=this[e]?e:"en";let o=this[e][n];if(t)for(const[n,e]of Object.entries(t))o=o.replace(`{{${n}}}`,e);return o}};class S{static{["get","post","put","patch","delete"].forEach((n=>{this[n]=(t,e)=>this.#n(n.toUpperCase(),t,e)}))}static async#n(n,t,e){const o={method:n,headers:{},body:e};e instanceof FormData||(o.headers["content-type"]="application/json; charset=utf-8",o.body=JSON.stringify(e));try{const n=await fetch(t,o),e=n.headers.get("content-type");let i=null;if(!e||e.includes("text/plain"))i=await n.text();else{if(!e.includes("application/json"))throw new Error(E.get("UNSUPPORTED_RESPONSE"));i=await n.json()}if(!n.ok)throw new Error(i.message);return i}catch(n){throw Thyme.error(n.message||E.get("NETWORK_ERROR")),n}}}class M{static setJsonObject(n,t){const e=n.querySelectorAll('[name]:not([name=""])');for(const n of e){const{tagName:e,type:o}=n,i=t[n.getAttribute("name")]??"";"checkbox"===o||"radio"==o?n.checked=i:"INPUT"===e||"SELECT"===e||"TEXTAREA"===e||e.startsWith("TH-")?n.value=i:n.innerHTML=i}}static getJsonObject(n){const t=(n="string"==typeof n?document.querySelector(n):n).querySelectorAll('[name]:not([name=""])'),e={};for(const n of t){let{type:t,tagName:o,name:i,value:r,checked:a}=n;if(i=i||n.attr("name"),"checkbox"!==t&&"radio"!==t||a){if("TH-UPLOAD"===o?r=n.entries:"INPUT"===o||"TEXTAREA"===o||o.startsWith("TH-")?"string"==typeof r&&(r=n.value=r.trim()):r="SELECT"===o?n.options[n.selectedIndex].value:n.isContentEditable?n.innerHTML=n.innerHTML.trim():n.textContent=n.textContent.trim(),n.reportValidity&&!n.reportValidity())return;e[i]?e[i]+=","+r:e[i]=r}}return e}static getJsonArray(n){n="string"==typeof n?document.querySelectorAll(n):n;const t=[];for(const e of n){const n=this.getJsonObject(e);if(!n)return;Object.keys(n).length&&t.push(n)}return t}}class T{#t=null;#e=null;#o=!1;#i=5e3;constructor(n){if(/^wss?:\/\//.test(n))this.#t=n;else{const t="https:"==location.protocol?"wss:":"ws:";this.#t=t+"//"+location.host+(n??"")}this.#r()}on(n,t){return addEventListener(this.#a(n),(n=>{t.call(this,n.detail)})),this}send(n){this.#e.send(n)}close(){this.#e.close()}#r(){this.#e=new WebSocket(this.#t),this.#e.onerror=()=>this.#s(),this.#e.onopen=()=>console.log("Channel is opened."),this.#e.onmessage=n=>{const{event:t,data:e}=JSON.parse(n.data);dispatchEvent(new CustomEvent(this.#a(t),{detail:e}))}}#s(){this.#o||(this.#o=!0,setTimeout((()=>{this.#r(),this.#o=!1}),this.#i))}#a(n){return"message"===n?"__":n}}var O=e(567),L=e(738);class _ extends HTMLElement{#l={};static get observedAttributes(){return this.attrs||[]}constructor(){super(),this.#d();const n=this.constructor;this.attachShadow({mode:"open"}),this.addStyle(L.Z+n.styles),this.render(n.template)}attributeChangedCallback(n,t,e){t!==e&&this.onChanged&&this.onChanged(n,e)}connectedCallback(){this.onConnected&&this.onConnected();const n=this.query("slot");n&&n.on("slotchange",(()=>{this.onAssigned&&this.onAssigned(n)}))}render(n){this.shell=l(n),this.shadowRoot.append(this.shell||"")}query(n){return this.shadowRoot.querySelector(n)}addStyle(n){let t=this.query("style");t||(t=d(),this.shadowRoot.append(t)),t.append(n)}#d(){new Set([...this.constructor.observedAttributes]).forEach((n=>{Object.defineProperty(this,this.#c(n),{set:t=>this.attr(n,t),get:()=>this.attr(n)})}))}#c(n){let t=this.#l[n];if(!t){const e=n.split("-");t=[e.shift(),...e.map((n=>n[0].toUpperCase()+n.slice(1)))].join(""),this.#l[n]=t}return t}}class A extends _{static styles=O.Z;static attrs=["disabled"];#h=["variant","href","target"];onChanged(n,t){const{shell:e}=this;e&&("variant"===n?t&&e.addClass(...t.split(/\s+/)):e.attr(n,t))}onConnected(){this.render(this.attr("href")?'<a part="button" class="button" draggable="false"><slot></slot></a>':'<button part="button"><slot></slot></button>'),this.#p();const n=this.#h.concat(this.constructor.attrs);for(const t of n)this.onChanged(t,this.attr(t))}set loading(n){if(n=!!n,this.disabled!=n)if(this.disabled=n,n){const n=l('<div class="loading"></div>');this.shell.append(n)}else{const n=this.query(".loading");n&&n.remove()}}#p(){const{shell:n}=this;let t;n.on("mousedown",(()=>{const e=l('<div class="ripple"></div>');n.append(e),t=e,e.end=!1,e.up=!1,e.fadeOut=function(){e.addClass("fade-out"),e.on("animationend",e.remove)};const o=n.getBoundingClientRect(),i=Math.sqrt(o.width**2+o.height**2)+"px";e.style.width=i,e.style.height=i,e.addClass("spread"),e.on("animationend",(()=>{e.end=!0,(e!=t||e.up)&&e.fadeOut()}))})),n.on(["mouseup","mouseleave"],(()=>{t&&(t.up=!0,t.end&&t.fadeOut())}))}}var D=e(545),z=e(205);const q={email:"^\\w+([_\\-+\\.]\\w+)*@\\w+([\\-\\.]\\w+)*\\.([a-zA-Z]{2,})$",url:"^https?:\\/\\/([\\w\\-]+\\.){1,}[a-zA-Z]{2,6}(\\/[\\S]*)?$"};class R extends _{static styles=z.Z;static attrs=["width","name","value","required","readonly","disabled","autofocus"];static template='<div class="field" part="field"><label></label><div class="field-body"><input/><slot></slot></div></div>';#u=["tonal","plain"];#h=["label","type","step","min","max","minlength","maxlength","placeholder","pattern"];#g=["text","password","email","url","number"];_native=this.#f();onChanged(n,t){switch(n){case"width":this.query(".field").style.width=t+"px";break;case"readonly":this._native.mockReadOnly();break;case"value":this._native.value=t;break;default:this._native.attr(n,t)}}onConnected(){this.value=this._native.value;const n=this.attr("variant");this.#u.includes(n)&&this.shell.addClass(n);const t=this.#h.shift(),e=this.attr(t),o=this.query(t);e?o.innerHTML=e:o.remove();for(const n of this.#h){let t=this.attr(n);t&&("type"===n&&(t=this.#g.includes(t)?t:"text","email"!==t&&"url"!==t||this._native.attr("pattern",q[t])),this._native.attr(n,t))}}onAssigned(n){const t=n.assignedElements();t&&t.length&&this._native.mockHide()}#f(){const n=this.query("input");return n.on("change",(n=>this.value=n.target.value)),n.mockHide=()=>{n.addClass("hidden"),n.mockReadOnly()},n.mockReadOnly=()=>{n.addClass("readonly"),n.onkeydown=()=>!1,n.on("compositionend",(()=>n.value=""))},n}#v(){const n=this._native.validity.valid,t=this._native.validationMessage;let e=this.query(".tooltip");if(e&&(clearTimeout(e.timer),e.remove()),!n){const n=this.query(".field"),o=this.query("label"),i=o?o.getBoundingClientRect().right:0,r=n.getBoundingClientRect().bottom;e=l(`<div class="tooltip">${t}</div>`),e.style.top=r+"px",e.style.left=i+10+"px",n.append(e),this.focus(),e.timer=setTimeout((()=>{e.remove()}),5e3)}return n}reportValidity(){return this.#v()}focus(){this._native.focus()}set icon(n){let t=this.query(".field-icon");t||(t=l('<div class="field-icon"></div>'),t.tabIndex=-1,this.shell.append(t),Object.defineProperty(t,"loading",{set:n=>{n?(t.innerHTML="",t.addClass("loading")):(t.removeClass("loading"),t.innerHTML=t._innerHTML)}}));const e="string"==typeof n?n:n.outerHTML;t.innerHTML=t._innerHTML=e}get icon(){return this.query(".field-icon")}}class H extends R{#m='<div><div class="overlay"></div><div class="calendar"></div></div>';#b;#y;#x;#w;onConnected(){super.onConnected(),this.addStyle(D.Z),this.readonly=!0,this.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="M744 130h186a47 47 0 0 1 47 47v743a47 47 0 0 1-47 47H94a47 47 0 0 1-47-47V177a47 47 0 0 1 47-47h186V37h93v93h278V37h93zm-93 93H373v93h-93v-93H141v186h742V223H744v93h-93zm232 278H141v373h742z"/></svg>',this.icon.on("click",(()=>this.#k())),this.query(".field-body").on("click",(()=>this.#k()))}#k(){this.#b=l(this.#m),this.shadowRoot.append(this.#b),this.query(".overlay").on("mousedown",(()=>this.#b.remove())),this.#y=this.query(".calendar"),this.#C(),this.#y.attachTo(this._native),this.#x=new Date(this._native.value),this.#x=isNaN(this.#x.getTime())?new Date:this.#x,this.#E(this.#x)}#C(){this.#y.on("click",(n=>{const t=n.target;if("TD"===t.parentNode.tagName){const n=new Date(this.#w.year,this.#w.month-1,t.dataset.index);this.value=v(n,"yyyy-MM-dd"),this.#b.remove()}const e=this.#y.query(".calendar-title");if(e.contains(t))return this.#E(this.#x);const o=this.#y.queryAll("svg.icon"),i=o[0],r=o[1],a=o[2],s=o[3],l=new Date(e.innerHTML);if(i.contains(t))l.setFullYear(l.getFullYear()-1);else if(r.contains(t))l.setMonth(l.getMonth()-1);else if(a.contains(t))l.setMonth(l.getMonth()+1);else{if(!s.contains(t))return;l.setFullYear(l.getFullYear()+1)}this.#E(l)}))}#E(n){const t=this.#w=this.#S(n);let e=`<div class="calendar-header"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="m267 512 311-311-89-90L88 512l401 401 89-90z"/><path d="m605 512 311-311-89-90-401 401 401 401 89-90z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="m430 512 311-311-89-90-401 401 401 401 89-90Z"/></svg><span class="calendar-title">${t.year}-${t.month.toString().padStart(2,0)}</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="M594 512 283 201l89-90 401 401-401 401-89-90Z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="M757 512 446 201l89-90 401 401-401 401-89-90z"/><path d="M419 512 108 201l89-90 401 401-401 401-89-90z"/></svg></div><div class="calendar-body"><table><thead><tr><th>${E.get("MON")}</th><th>${E.get("TUE")}</th><th>${E.get("WED")}</th><th>${E.get("THU")}</th><th>${E.get("FRI")}</th><th>${E.get("SAT")}</th><th>${E.get("SUN")}</th></tr></thead><tbody>`;const o=new Date;for(let n=0;n<t.days.length;n++){n%7==0&&(e+="<tr>");const i=t.days[n];let r="";t.month!=i.month&&(r="minor"),t.year==this.#x.getFullYear()&&i.month==this.#x.getMonth()+1&&i.day==this.#x.getDate()&&(r="curr"),t.year==o.getFullYear()&&i.month==o.getMonth()+1&&i.day==o.getDate()&&(r="today"),e+='<td><div data-index="'+i.index+'" class="'+r+'">'+i.day+"</div></td>",n%7==6&&(e+="</tr>")}e+="</tbody></table></div>",this.#y.innerHTML=e}#S(n=new Date){const t=n.getFullYear(),e=n.getMonth()+1,o=new Date(t,e-1,1),i=new Date(t,e,0).getDate();let r=o.getDay();0===r&&(r=7);const a=r-1,s=new Date(t,e-1,0).getDate(),l=[];for(let n=0;n<42;n++){const t=n+1-a;let o=t,r=e;t<=0?(r=e-1,o=s+t):t>i&&(r=e+1,o-=i),0===r&&(r=12),r>12&&(r=1),l.push({month:r,day:o,index:t})}return{year:t,month:e,days:l}}}var N=e(399);class U extends _{static styles=N.Z;static attrs=["name","value","checked","disabled"];static template='<label><input type="checkbox"/><div><slot></slot></div></label>';type="checkbox";#M=this.query("input");onChanged(n,t){this.#M.attr(n,t),"disabled"===n&&this.shell.addClass("disabled"),"checked"===n&&(this.#M.checked=!!t)}onConnected(){const n=new Event("change");this.#M.on("change",(t=>{this.checked=t.target.checked,this.dispatchEvent(n)}))}}class F extends R{#T=[];onChanged(n,t){if(super.onChanged(n,t),"value"===n){const n=t.split(",");this.#T.forEach((t=>{t.checked=n.includes(t.value)}))}}onConnected(){super.onConnected(),this._native.mockHide()}async onAssigned(n){for(const t of n.assignedElements())"TH-CHECKBOX"===t.tagName?this.#T.push(t):(await r(10),this.#T.push(...t.querySelectorAll("th-checkbox")));this.#O();for(const n of this.#T)n.on("change",(()=>this.#O()))}#O(){const n=[];this.#T.filter((n=>n.checked)).forEach((t=>n.push(t.value))),this.value=n.join(",")}}var P=e(815);class I extends _{static styles=P.Z;static template='<div class="overlay dialog"><div class="dialog-panel"><div class="dialog-header"></div><div class="dialog-body"><slot></slot></div><div class="dialog-footer"></div></div></div>';#L=0;#_;#A;onConnected(){const n=g(this.attr("width"));n&&(this.query(".dialog-panel").style.width=n+"px");const t=this.query(".dialog-header");if(t){const n=this.attr("title");n?t.innerHTML=n:t.remove()}document.addEventListener("keyup",(n=>{27!==n.keyCode||this.#_||this.hide()}))}set disableEsc(n){this.#_=n}set buttons(n=[]){const t=this.query(".dialog-footer");t.innerHTML="";for(let e of n){"string"==typeof e&&(e={label:e});const n=l(`<button>${e.label}</button>`);this.#D(n),t.append(n),!0===e.disabled&&(n.disabled=!0),!0===e.hidden&&(n.style.display="none"),!0===e.primary&&n.addClass("primary"),n.on("click",(async()=>{if(e.onclick)try{n.loading=!0,await e.onclick.call(this,this,n)}finally{n.loading=!1}else this.hide()}))}}get buttons(){return this.query(".dialog-footer").querySelectorAll("button")}open(n=!1){0==this.#L&&(i.block(),this.#A=n,this.#z("fade-in","scale-in",2),this.dispatchEvent(new Event("open")))}hide(){2==this.#L&&(i.unblock(),this.#z("fade-out","scale-out",0),this.dispatchEvent(new Event("hide")))}#z(n,t,e){this.#L=1;const{shell:o}=this;o.addClass(n),2==e&&(o.style.display="flex");const i=this.query(".dialog-panel");i.addClass(t),o.onanimationend=()=>{i.removeClass(t),o.removeClass(n),o.onanimationend=null,this.#L=e,0==e&&(this.#A?this.remove():o.style.display="none")}}#D(n){Object.defineProperty(n,"loading",{set:function(t){if(t=!!t,this.disabled!=t)if(this.disabled=t,t){const n=l('<div class="loading"></div>');this.append(n)}else{const t=n.query(".loading");t&&t.remove()}}})}}class Z extends _{onConnected(){new MutationObserver((()=>{const n=this.textContent,t="block"===this.attr("display");try{this.shadowRoot.append(parseMath(n,t))}catch(t){this.shadowRoot.innerHTML="<math><merror><mtext>"+n+"</mtext></merror></math>"}})).observe(this,{characterData:!0,childList:!0,attributes:!0})}}var B=e(336);class $ extends R{#m='<div><div class="overlay"></div><div class="select"></div></div>';#T;onChanged(n,t){if(super.onChanged(n,t),"value"===n&&this.#T){const n=this.#T.find((n=>n.value==t));n&&(this.#O(t,n.label),this.#T.forEach((n=>n.selected=!1)),n.selected=!0,n.scrollIntoView({block:"nearest"}))}}onConnected(){super.onConnected(),this.addStyle(B.Z),this.readonly=!0,this.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="m512 594 311-311 90 89-401 401-401-401 90-89Z"/></svg>',this.icon.on("click",(()=>this.#k())),this.query(".field-body").on("click",(()=>this.#k()))}onAssigned(n){this.#T=n.assignedElements();const t=this.#T.find((n=>n.selected));t&&this.#O(t.value,t.label)}#k(){const n=l(this.#m);this.shadowRoot.append(n),this.query(".overlay").on("mousedown",(()=>n.remove()));const t=this.query(".select");t.attachTo(this._native);for(const e of this.#T){const{label:o,value:i,selected:r,disabled:a}=e,s=l(`<a class="option">${o||"&#160;"}</a>`);t.append(s),r&&i&&(s.addClass("selected"),s.scrollIntoView({block:"nearest"})),a?s.addClass("disabled"):s.on("click",(()=>{this.#O(i,o),this.#T.forEach((n=>n.selected=!1)),e.selected=!0,n.remove()}))}}#O(n,t){this.value=n,this._native.value=t}}var j=e(377);class W extends _{static styles=j.Z;static attrs=["name","checked"];static template='<label class="switch"><input type="checkbox"/><i></i></label>';#M=this.query("input");onChanged(n,t){this.#M.attr(n,t),"checked"===n&&(this.#M.checked=!!t)}onConnected(){this.value=this.value||0,this.#M.on("change",(n=>{this.checked=n.target.checked}))}get value(){return this.checked?1:0}set value(n){this.checked=!!n}}var V=e(739);class Y extends R{#q;onChanged(n,t){super.onChanged(n,t),this.#q&&"value"===n&&(this.#q.textContent=t)}onConnected(){super.onConnected(),this.addStyle(V.Z),this._native.mockHide(),this.#q=l('<div contenteditable="plaintext-only"></div>'),this.query(".field-body").append(this.#q),this.#q.on("input",(n=>{this.value=n.target.textContent}))}onAssigned(n){let t="";n.assignedNodes().forEach((n=>t+=n.textContent)),t=t.trim(),this.#q.textContent=t,this.value=t}reportValidity(){const n=super.reportValidity();return n||this.#q.focus(),n}}var X=e(613);class K extends _{static styles=X.Z;static attrs=["type"];static template='<div class="overlay toast"><div><slot></slot></div></div>';onChanged(n,t){this.query(".toast>div").addClass(t)}onConnected(){const n=this.query(".toast");n.addClass("bounce-in");const t=g(this.attr("delay"))||3e3;setTimeout((()=>{n.addClass("bounce-out"),n.on("animationend",(()=>this.remove()))}),t)}}var J=e(383);class G extends _{static styles=J.Z;static template='<div class="toptray"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="m512 430 311 311 90-89-401-401-401 401 90 89Z"/></svg></div>';onConnected(){const{shell:n}=this,t=this.attr("x"),e=this.attr("y");let o;t&&(n.style.right=t+"px"),e&&(n.style.bottom=e+"px"),n.onclick=()=>{cancelAnimationFrame(o),o=requestAnimationFrame((function n(){i.top=parseInt(i.top/1.2),i.top>0?o=requestAnimationFrame(n):cancelAnimationFrame(o)}))},addEventListener("scroll",(()=>{i.top>450?n.style.display="block":n.style.display="none"}))}}var Q=e(862);class nn extends R{#m='<div><input type="file"/><div class="upload-list" tabindex="-1"></div></div>';#R=[];#H;#N;#U;#F;onConnected(){if(super.onConnected(),this.addStyle(Q.Z),this._native.mockHide(),this.query(".field-body").append(l(this.#m)),this.#U=this.attr("editable"),this.#U){const n=this.query('input[type="file"]');n.on("change",(n=>this.#P(n.target.files))),this.icon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="M871 923H153V796h718ZM576 294v400H448V294L213 529l-85-86L512 59l384 384-85 86z"/></svg>',this.icon.on("click",(()=>n.click())),this.#F=g(this.attr("multiple")),this.#F>1&&n.attr("multiple",!0);const t=this.attr("accept");t&&n.attr("accept",t)}}async#P(n){if(!n||0===n.length)return;if(n.length+this.#R.length>this.#F)return void an.warn(E.get("MAX_ALLOWED_FILES",{maxFiles:this.#F}));const t=g(this.attr("maxsize"));for(const e of n)if(t>0&&e.size>t)return an.warn(E.get("MAX_ALLOWED_SIZE",{maxSize:b(t)}));for(const t of n){const n=URL.createObjectURL(t),e={_id:a(),originalName:t.name,previewUrl:n,downloadUrl:n,file:t};this.#H&&(this.icon.loading=!0,await this.#H(e),this.icon.loading=!1,this.#E(e))}}#E(n){if(!n||!n._id)return;const t=l(`<div class="upload-entry" id="_${n._id}"><a class="preview-link" target="_blank" href="${n.previewUrl}">${n.originalName}</a><a class="download-icon" href="${n.downloadUrl}" download="${n.originalName}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="M512 1021.7C231 1021.7 2.3 793.1 2.3 512S230.9 2.3 512 2.3s509.7 228.6 509.7 509.7-228.6 509.7-509.7 509.7zm0-946.6C271 75 75 271 75 512s196 437 437 437 437-196 437-437S753 75 512 75zm207.7 448.4a37.2 37.2 0 0 0-52.3 0l-119 118.2v-349a36.4 36.4 0 1 0-72.8 0v350.9L355.9 522.2a36.4 36.4 0 0 0-51.6-.3 36.6 36.6 0 0 0-.2 51.8l181.3 183.2a36.6 36.6 0 0 0 51.8.3v-.1l.2-.1 182.2-181.7a36.6 36.6 0 0 0 .1-51.8z"/></svg></a></div>`);if(this.#U){const e=l('<a class="remove-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="icon"><path d="M512 1021.7C231 1021.7 2.3 793.1 2.3 512S230.9 2.3 512 2.3s509.7 228.6 509.7 509.7-228.6 509.7-509.7 509.7zm0-946.3A437 437 0 0 0 75.4 512 437 437 0 0 0 512 948.6 437.1 437.1 0 0 0 948.6 512 437 437 0 0 0 512 75.4zm51.3 438.2 157.4-155.8a36.4 36.4 0 1 0-51.2-51.7L512 462 356.6 306.3a36.4 36.4 0 1 0-51.5 51.4l155 155.5-156.3 154.6a36.4 36.4 0 1 0 51.2 51.8l156.5-154.8L669.3 723a36.2 36.2 0 0 0 51.5 0 36.4 36.4 0 0 0 0-51.4L563.3 513.6z"/></svg></a>');e.on("click",(()=>this.#I(n))),t.append(e)}this.query(".upload-list").append(t),this.#R.push(n),this._native.value=this.entries.length||""}#I(n){an.confirm(E.get("DELETE_PROMPT"),(async()=>{!n.file&&this.#N&&(await this.#N(n),an.success(E.get("DELETE_SUCCESS"))),this.query("#_"+n._id).remove();const t=this.#R.findIndex((t=>t._id==n._id));this.#R.splice(t,1),this._native.value=this.entries.length||""}))}get entries(){return this.#R}set entries(n){this.#R.length=0,n&&Array.isArray(n)&&n.forEach((n=>this.#E(n)))}set onUpload(n){this.#H=n}set onRemove(n){this.#N=n}}var tn=e(49);class en extends _{static styles=tn.Z;static template="<div><slot></slot></div>";#Z;#B;#$;#j;#W;onConnected(){this.#Z=g(this.attr("column"))||3,this.#B=g(this.attr("spacing"))||10,this.#j=new Array(this.#Z)}onAssigned(n){this.#W=n.assignedElements(),this.#E(),addEventListener("resize",(()=>this.#E()))}#E(){this.#j.fill(0),this.#$=(this.offsetWidth-this.#B*(this.#Z-1))/this.#Z;for(const n of this.#W){const t=this.#V();n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=this.#$+"px",this.#j[t.i]=t.y+n.offsetHeight,this.style.height=Math.max.apply(null,this.#j)+"px"}}#V(){const n=Math.min.apply(null,this.#j),t=this.#j.indexOf(n);return{i:t,x:t>0?t*(this.#$+this.#B):0,y:n>0?n+this.#B:0}}}const on={start(n){if(this.status)return;const t=(n=n||document.body).getBoundingClientRect();this.$instance=document.createElement("div"),this.$instance.setAttribute("style",`position:fixed; z-index:999; background:var(--primary-color,var(--pc)); transition:width .3s linear;left:${t.x}px; top:${t.y}px; max-width:${t.width}px; width:0; height:1px;`),document.body.append(this.$instance),this._observe(),this.status=1,this._trickle=setInterval((()=>{this.status<99&&(this.status+=Math.round((100-this.status)/3*Math.random()))}),300)},done(){this.status&&(this.status=100,clearInterval(this._trickle),setTimeout((()=>{this.status=0,this.$instance.remove()}),300))},_observe(){if(this._observed)return;this._observed=!0;let n=this.status;Object.defineProperty(this,"status",{get:()=>n,set:t=>{n=t,this.$instance.style.width=t+"%"}})}};class rn{static util=n;static http=S;static form=M;static Progress=on;static Channel=T;static#Y;static{h(),document.head.append(d(t.Z)),s("th-button",A),s("th-calendar",H),s("th-checkbox",U),s("th-checkgroup",F),s("th-dialog",I),s("th-field",R),s("th-formula",Z),s("th-select",$),s("th-switch",W),s("th-textbox",Y),s("th-toast",K),s("th-toptray",G),s("th-upload",nn),s("th-waterfall",en)}static alert(n,t,e){const o=l(`<th-dialog>${n}</th-dialog>`);document.body.append(o);const i=[];e?(i.push({label:E.get("NO")}),i.push({label:E.get("YES")})):i.push({label:E.get("OK")}),Object.assign(i[i.length-1],{primary:!0,onclick:async n=>{t&&await t.call(n,n),n.hide()}}),o.buttons=i,o.open(!0)}static confirm(n,t){this.alert(n,t,!0)}static info(n,t,e){this.#Y&&(this.#Y.remove(),this.#Y=null),this.#Y=l(`<th-toast>${n}</th-toast>`),this.#Y.attr("type",t),this.#Y.attr("delay",e),document.body.append(this.#Y)}static error(n){this.info(n,"error",5e3)}static warn(n){this.info(n,"warning",4e3)}static success(n){this.info(n,"success")}}window.Thyme=rn;const an=rn})()})();